{"version":3,"sources":["components/Spinner.js","pages/city/CityCrud.js"],"names":["Spinner","class","UserCrud","history","match","dispatch","useDispatch","citiesReducer","useSelector","state","buildingsReducer","useState","errorValidation","name","label","buildings","formData","setFormData","onChange","e","preventDefault","target","value","useEffect","params","id","readOneCity","then","res","data","console","log","catch","err","readCities","readBuildings","onUserSubmit","a","updateCity","_id","push","createsCity","loading","className","parentClassName","style","backgroundColor","placeholder","type","onSelectChange","map","building","index","find","item","toString","onClick","filter","deleteBuilding","size","_objI","borderColor","viewBox"],"mappings":"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","file":"static/js/17.f7ffa795.chunk.js","sourcesContent":["import React from 'react';\r\n\r\nconst Spinner = () => {\r\n  return <div class='loader'></div>;\r\n};\r\n\r\nexport default Spinner;\r\n","import Layout from '../../components/Layout';\r\nimport React, { useState, useEffect } from 'react';\r\nimport { useSelector, useDispatch } from 'react-redux';\r\nimport { Redirect, Route, useHistory, useLocation } from 'react-router-dom';\r\nimport {\r\n  updateCity,\r\n  readCities,\r\n  deleteCity,\r\n  clearCity,\r\n  readOneCity,\r\n  createsCity,\r\n} from '../../redux/actions/city';\r\nimport { readBuildings } from '../../redux/actions/building';\r\nimport { IoIosClose } from 'react-icons/io';\r\nimport _objO from '../../utils/_objO';\r\nimport _objI from '../../utils/_objI';\r\nimport Spinner from '../../components/Spinner';\r\nexport default function UserCrud({ history, match }) {\r\n  const dispatch = useDispatch();\r\n  const citiesReducer = useSelector(state => state.citiesReducer);\r\n  const buildingsReducer = useSelector(state => state.buildingsReducer);\r\n  const [errorValidation, setErrorValidation] = useState({});\r\n  const [formData, setFormData] = useState({\r\n    name: '',\r\n    label: '',\r\n    buildings: [],\r\n  });\r\n  const onChange = e => {\r\n    e.preventDefault();\r\n    setFormData({ ...formData, [e.target.name]: e.target.value });\r\n  };\r\n  const onSelectChange = e => {\r\n    e.preventDefault();\r\n    setFormData({\r\n      ...formData,\r\n      [e.target.name]: [...formData.buildings, e.target.value],\r\n    });\r\n  };\r\n  useEffect(() => {\r\n    if (match.params.id) {\r\n      dispatch(readOneCity(match.params.id))\r\n        .then(res => {\r\n          setFormData({ ...formData, ...res.data.data });\r\n          console.log({ res: res.data.data });\r\n        })\r\n        .catch(err => {});\r\n    }\r\n  }, [match.params.id]);\r\n  useEffect(() => {\r\n    dispatch(readCities());\r\n  }, []);\r\n  useEffect(() => {\r\n    dispatch(readBuildings());\r\n  }, []);\r\n\r\n  const onUserSubmit = async e => {\r\n    e.preventDefault();\r\n    if (!match.params.id) {\r\n      dispatch(\r\n        createsCity({\r\n          name: formData.name,\r\n          label: formData.label,\r\n          buildings: formData.buildings,\r\n        })\r\n      ).then(res => history.push(`/admin/city`));\r\n    } else if (match.params.id) {\r\n      dispatch(\r\n        updateCity({\r\n          _id: match.params.id,\r\n          name: formData.name,\r\n          label: formData.label,\r\n          buildings: formData.buildings,\r\n        })\r\n      ).then(res => history.push(`/admin/city`));\r\n    } else {\r\n      console.log('error');\r\n    }\r\n  };\r\n  useEffect(() => {}, [formData.buildings]);\r\n  const deleteBuilding = e =>\r\n    setFormData(\r\n      {\r\n        ...formData,\r\n        buildings: formData.buildings.filter(building => building !== e),\r\n      },\r\n      formData.buildings\r\n    );\r\n  if (citiesReducer.loading || buildingsReducer.loading) {\r\n    return (\r\n      <Layout>\r\n        <div className='flex items-center justify-center h-screen'>\r\n          <Spinner />\r\n        </div>{' '}\r\n      </Layout>\r\n    );\r\n  } else {\r\n    return (\r\n      <Layout parentClassName={' '}>\r\n        <div\r\n          style={{ backgroundColor: '#F8F8F8' }}\r\n          className='w-full h-full p-10 transition-all'>\r\n          <div className='flex flex-wrap items-center justify-between w-full transition-all select-none'>\r\n            <div className='flex-grow my-10 text-4xl font-normal text-left text-gray-500 transition-all '>\r\n              Cities\r\n              <div className='flex items-center w-full mt-4 text-sm text-left text-gray-500 transition-all'>\r\n                <div className='font-medium transition-all duration-100 transform cursor-pointer hover:text-gray-600 hover:scale-110'>\r\n                  Dashboard\r\n                </div>\r\n                <div className='px-3 font-medium'>{`->`}</div>\r\n                <div className='font-medium transition-all duration-100 transform cursor-pointer hover:text-gray-600 hover:scale-110'>\r\n                  Cities\r\n                </div>\r\n                <div className='px-3 font-medium'>{`->`}</div>\r\n                <div className='font-medium transition-all duration-100 transform cursor-pointer hover:text-gray-600 hover:scale-110'>\r\n                  New city\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          {/*  */}\r\n          <div className='py-16 bg-white border rounded shadow-md hover:shadow-lg px-14 '>\r\n            <div className='my-5'>\r\n              <input\r\n                placeholder={'Name'}\r\n                value={formData.name}\r\n                type='text'\r\n                name='name'\r\n                onChange={e => {\r\n                  onChange(e);\r\n                }}\r\n                className='w-full p-4 font-normal text-gray-600 border rounded-md shadow outline-none focus:outline-none'\r\n              />\r\n              <small className='text-red-600'></small>\r\n            </div>\r\n            <div className='my-5'>\r\n              <input\r\n                name='label'\r\n                value={formData.label}\r\n                type='email'\r\n                placeholder={'Label'}\r\n                onChange={e => {\r\n                  onChange(e);\r\n                }}\r\n                className='w-full p-4 font-normal text-gray-600 border rounded-md shadow outline-none focus:outline-none'\r\n              />\r\n              <small className='text-red-600'></small>\r\n            </div>\r\n            <div className='my-5'>\r\n              <select\r\n                name='buildings'\r\n                type='text'\r\n                placeholder='buildings'\r\n                onChange={e => {\r\n                  onSelectChange(e);\r\n                }}\r\n                className='w-full p-4 font-normal text-gray-600 border rounded-md shadow outline-none focus:outline-none'>\r\n                <option>Select a buildings </option>\r\n                {buildingsReducer.buildings.map((building, index) => {\r\n                  if (\r\n                    formData.buildings.find(\r\n                      item => item.toString() === building._id.toString()\r\n                    )\r\n                  )\r\n                    return null;\r\n                  else\r\n                    return (\r\n                      <option key={index} value={building._id}>\r\n                        {building.label}\r\n                      </option>\r\n                    );\r\n                })}\r\n              </select>\r\n              <div className='flex flex-wrap w-full my-8 bg-gray-100 rounded flex-between '>\r\n                {formData.buildings.map(building =>\r\n                  buildingsReducer.buildings.find(\r\n                    item => building === item._id\r\n                  ) ? (\r\n                    <div className='flex items-center justify-between px-2 py-2 mx-2 my-2 text-white bg-black rounded-lg min-w-96 bg-opacity-60 '>\r\n                      <div className='mr-6'>\r\n                        {\r\n                          buildingsReducer.buildings.find(\r\n                            item => building === item._id\r\n                          ).label\r\n                        }\r\n                      </div>\r\n                      <div onClick={e => deleteBuilding(building)}>\r\n                        <IoIosClose\r\n                          className='text-white cursor-pointer '\r\n                          size='1.4em'\r\n                        />\r\n                      </div>\r\n                    </div>\r\n                  ) : (\r\n                    ''\r\n                  )\r\n                )}\r\n              </div>\r\n            </div>\r\n            <div className='flex items-center justify-center w-full'>\r\n              <div\r\n                // disabled={_objI(errorValidation)}\r\n                onClick={e => onUserSubmit(e)}\r\n                style={{\r\n                  backgroundColor: _objI(errorValidation) ? '#666' : '#212121',\r\n                  borderColor: '#212121',\r\n                }}\r\n                className={` ${citiesReducer.loading ? `animate-pulse` : ``} \r\n               \r\n                  w-full text-white py-3 px-4 text-center font-medium rounded-lg mt-16 cursor-pointer hover:bg-black `}>\r\n                {citiesReducer.loading ? (\r\n                  <svg\r\n                    className='absolute w-5 h-5 mr-3 border-r-2 border-white rounded-full animate-spin left-3'\r\n                    viewBox='0 0 24 24'></svg>\r\n                ) : (\r\n                  ''\r\n                )}\r\n                Save\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </Layout>\r\n    );\r\n  }\r\n}\r\n"],"sourceRoot":""}